{"version":3,"sources":["modules/timefix.js","modules/rows.js","modules/infoscreen.js","App.js","index.js"],"names":["timeFix","timeDec","console","log","hours","Math","floor","minutes","round","Rows","buses","map","bus","key","id","linja","lahtee","linja_pitka","pysakki","Infoscreen","timetable","weekDayNumber","Date","getDay","hour","getHours","getMinutes","timeAsDecimal","stops","useState","stopIndex","setStopIndex","showAll","setShowAll","showOnlyTimeTable","setShowOnlyTimeTable","handleStops","i","length","handleVkoPaiva","getDate","getMonth","showing","showingTimeTable","onClick","busesAtThatDay","filter","vkopaiva","foundBuses","busesFromStop","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.983e1dfc.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst timeFix = ({timeDec}) => {\r\n    console.log(\"timeFix.js BEGIN\")\r\n    const hours = Math.floor(timeDec * 24)\r\n    const minutes = Math.round((timeDec * 24 - hours) * 60)\r\n\r\n    if(minutes < 10) {\r\n        return (\r\n            <p>\r\n            {hours}:0{minutes}\r\n            </p>\r\n        )\r\n    }\r\n\r\n    else {\r\n        return (\r\n            <p>\r\n            {hours}:{minutes}\r\n            </p>\r\n        )\r\n    }\r\n}\r\n\r\nexport default timeFix","import React from 'react'\r\nimport TimeFix from './timefix'\r\n\r\nconst Rows = ({buses}) => {\r\n    console.log(\"rows.js BEGIN\")\r\n    console.log(\"buses: \", buses)\r\n    return (\r\n        buses.map(bus =>\r\n            <tr key={bus.id}>\r\n                <td>{bus.linja}</td>\r\n                <td><TimeFix timeDec={bus.lahtee} /></td>\r\n                <td>{bus.linja_pitka}</td>\r\n                <td>{bus.pysakki}</td>\r\n            </tr>\r\n        )\r\n    )\r\n}\r\n\r\nexport default Rows","import React, {useState} from 'react'\r\nimport Rows from './rows'\r\nimport {timetable} from './../db.json'\r\n\r\nconst ONEHOUR = 1/24\r\n\r\nconst Infoscreen = () => {\r\n    console.log(\"infoscreen.js BEGIN\")\r\n    console.log(\"timetable:\", timetable)\r\n    \r\n    const weekDayNumber = new Date().getDay()\r\n    const hour = new Date().getHours()\r\n    const minutes = new Date().getMinutes()\r\n    console.log(\"Weekday number:\", weekDayNumber, \" clock\", hour, \":\", minutes)\r\n\r\n    const timeAsDecimal = hour * ONEHOUR + minutes * ONEHOUR/60\r\n    console.log(\"time in decimal form\", timeAsDecimal)\r\n\r\n//  const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\r\n    const stops = [\"Urhonkatu 1\", \"Urhonkatu 2\", \"Tourunsilta 1\", \"Tourunsilta 2\"]\r\n    const [stopIndex, setStopIndex] = useState(0)\r\n\r\n    const [showAll, setShowAll] = useState(true)\r\n    const [showOnlyTimeTable, setShowOnlyTimeTable] = useState(false)\r\n\r\n    // Choose next stop from the array \"stops\"\r\n    const handleStops = (i) => {\r\n        if (i < stops.length - 1)\r\n            setStopIndex(i+1)\r\n        else {\r\n            setStopIndex(0)\r\n        }\r\n    }\r\n\r\n    // Return correct \"vkopaiva\" value\r\n    const handleVkoPaiva = () => {\r\n        if (new Date().getDate() === 24 && new Date().getMonth() === 12) {\r\n            console.log(\"JOULUAATTO\")\r\n            return \"Jouluaatto\"\r\n        }\r\n\r\n        else if (0 < weekDayNumber < 5)\r\n            return \"M-P talvi\"\r\n\r\n        else if (weekDayNumber === 0)\r\n            return \"S - talvi\"\r\n\r\n        else if (weekDayNumber === 6)\r\n            return \"L - talvi\"\r\n    }\r\n\r\n    // Handle the bus schedule to be presented\r\n    const HandleNextLine = () => {\r\n\r\n        if(timetable === null) {\r\n            return (\r\n                <p>Loading timetable</p>\r\n            )\r\n        }\r\n\r\n        if(showAll) {\r\n            const busesAtThatDay = timetable.filter(bus => bus.vkopaiva === handleVkoPaiva())\r\n            console.log(\"busesAtThatDay: \", busesAtThatDay)\r\n            const foundBuses = busesAtThatDay.filter(bus => bus.lahtee > timeAsDecimal && bus.lahtee < timeAsDecimal + 0.007)\r\n            console.log(\"foundBuses: \", foundBuses)\r\n\r\n            if(foundBuses.length === 0) {\r\n                return (\r\n                    <p>Ei lähteviä linkkejä varttiin</p>\r\n                )\r\n            }\r\n            return (\r\n                <div>\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th>Linja</th>\r\n                                <th>Lähtee</th>\r\n                                <th>Reitti</th>\r\n                                <th>Pysäkiltä</th>\r\n                            </tr>\r\n                            <Rows buses={foundBuses} />\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        else {\r\n            const busesFromStop = timetable.filter(bus => bus.pysakki === stops[stopIndex])\r\n            console.log(\"busesFromStop \", busesFromStop)\r\n            const busesAtThatDay = busesFromStop.filter(bus => bus.vkopaiva === handleVkoPaiva())\r\n            console.log(\"busesAtThatDay: \", busesAtThatDay)\r\n            const foundBuses = busesAtThatDay.filter(bus => bus.lahtee > timeAsDecimal && bus.lahtee < timeAsDecimal + 0.0105)\r\n            console.log(\"foundBuses: \", foundBuses)\r\n\r\n            if(foundBuses.length === 0) {\r\n                return (\r\n                    <div>\r\n                        <h3 id=\"stops\">{stops[stopIndex]} <br/> <button onClick={() => handleStops(stopIndex) } >Seuraava pysäkki</button></h3>\r\n                        <p>Ei lähteviä linkkejä varttiin</p>\r\n                    </div>\r\n                )\r\n            }\r\n            return (\r\n                <div>\r\n                    <h3 id=\"stops\">{stops[stopIndex]} <br/> <button onClick={() => handleStops(stopIndex) } >Seuraava pysäkki</button></h3>\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th>Linja</th>\r\n                                <th>Lähtee</th>\r\n                                <th>Reitti</th>\r\n                                <th>Pysäkiltä</th>\r\n                            </tr>\r\n                            <Rows buses={foundBuses} />\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const handleShowAll = () => {\r\n        setShowAll(!showAll)\r\n    }\r\n\r\n    const handleShowOnlyTimeTable = () => {\r\n        setShowOnlyTimeTable(!showOnlyTimeTable)\r\n    }\r\n\r\n    const showing = showAll\r\n        ? \"kaikki\"\r\n        : \"pysäkeittäin\"\r\n    \r\n    const showingTimeTable = showOnlyTimeTable\r\n        ? ''\r\n        :   <div>\r\n                <h1>Linkkinäyttö Kotiraide</h1>\r\n                <button id=\"stopsButton\" onClick={() => handleShowAll()}>Näytä {showing}</button>\r\n                <br/> <br/>\r\n            </div>\r\n\r\n    return (\r\n        <div>\r\n            {showingTimeTable}\r\n            <HandleNextLine />\r\n            <br/> <br/>\r\n            <button onClick={() => handleShowOnlyTimeTable()}>Vaihda näkymää</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Infoscreen","import React from 'react'\nimport Infoscreen from './modules/infoscreen'\n\nconst App = () => {\n  console.log('App.js BEGIN')\n\n  return (\n    <div>\n      <Infoscreen />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n    <App />, \n    document.getElementById('root')\n)"],"sourceRoot":""}